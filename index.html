<!DOCTYPE html>
<html>
<head>
<title>Mini Battle Royale</title>
<style>
body{margin:0;overflow:hidden;background:black;color:white;font-family:Arial;}
#score{position:absolute;top:10px;left:10px;font-size:20px;}
#health{position:absolute;top:40px;left:10px;font-size:20px;}
canvas{background:#111;display:block;}
</style>
</head>
<body>

<div id="score">Score: 0</div>
<div id="health">Health: 100</div>
<canvas id="game"></canvas>

<script>
let canvas=document.getElementById("game");
let ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let player={x:canvas.width/2,y:canvas.height/2,size:20,color:"lime",health:100};
let bullets=[];
let enemies=[];
let score=0;

let keys={};

document.addEventListener("keydown",e=>keys[e.key]=true);
document.addEventListener("keyup",e=>keys[e.key]=false);

document.addEventListener("click",e=>{
bullets.push({
x:player.x,
y:player.y,
dx:(e.clientX-player.x)/20,
dy:(e.clientY-player.y)/20
});
});

function spawnEnemy(){
let side=Math.floor(Math.random()*4);
let x,y;
if(side==0){x=0;y=Math.random()*canvas.height;}
if(side==1){x=canvas.width;y=Math.random()*canvas.height;}
if(side==2){x=Math.random()*canvas.width;y=0;}
if(side==3){x=Math.random()*canvas.width;y=canvas.height;}
enemies.push({x,y,size:20});
}

setInterval(spawnEnemy,1000);

function update(){
ctx.clearRect(0,0,canvas.width,canvas.height);

if(keys["w"]) player.y-=5;
if(keys["s"]) player.y+=5;
if(keys["a"]) player.x-=5;
if(keys["d"]) player.x+=5;

ctx.fillStyle=player.color;
ctx.beginPath();
ctx.arc(player.x,player.y,player.size,0,Math.PI*2);
ctx.fill();

bullets.forEach((b,i)=>{
b.x+=b.dx;
b.y+=b.dy;
ctx.fillStyle="yellow";
ctx.beginPath();
ctx.arc(b.x,b.y,5,0,Math.PI*2);
ctx.fill();
});

enemies.forEach((e,ei)=>{
let angle=Math.atan2(player.y-e.y,player.x-e.x);
e.x+=Math.cos(angle)*2;
e.y+=Math.sin(angle)*2;

ctx.fillStyle="red";
ctx.beginPath();
ctx.arc(e.x,e.y,e.size,0,Math.PI*2);
ctx.fill();

let dist=Math.hypot(player.x-e.x,player.y-e.y);
if(dist<player.size+e.size){
player.health-=1;
document.getElementById("health").innerText="Health: "+player.health;
if(player.health<=0){
alert("Game Over! Score: "+score);
location.reload();
}
}

bullets.forEach((b,bi)=>{
let d=Math.hypot(b.x-e.x,b.y-e.y);
if(d<e.size){
enemies.splice(ei,1);
bullets.splice(bi,1);
score++;
document.getElementById("score").innerText="Score: "+score;
}
});
});

requestAnimationFrame(update);
}

update();
</script>

</body>
</html>